<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Redirigere tutte le richieste http su https tramite Virtual Host &#8211; {{ dev playground }}</title>
<meta name="description" content="Come redirigere tutte le richieste da http ad https configurando opportunamente il nostro Virtual Host">
<meta name="keywords" content="https, ssl, apache, zf1, linux, centos">


<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Redirigere tutte le richieste http su https tramite Virtual Host">
<meta property="og:description" content="Come redirigere tutte le richieste da http ad https configurando opportunamente il nostro Virtual Host">
<meta property="og:url" content="http://localhost:4000/articles/redirigere-richieste-http-to-https">
<meta property="og:site_name" content="{{ dev playground }}">





<link rel="canonical" href="http://localhost:4000/articles/redirigere-richieste-http-to-https">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="{{ dev playground }} Feed">
<link rel="author" href="https://plus.google.com/118069744464640098068?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="http://localhost:4000/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://localhost:4000">{{ dev playground }}</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="http://localhost:4000/about" >Chi Sono</a></li>
		        
				<li><a href="http://localhost:4000/articles" >Blog</a></li>
		        
		        <li><i class="icon-feed"></i> <a href="http://localhost:4000/feed.xml" title="Atom/RSS feed">Feed</a>
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  <div class="article-author-top">
    <img src="http://localhost:4000/images/bio-photo.jpg" class="bio-photo" alt="Stefano Corallo bio photo"></a>
<h3>Stefano Corallo</h3>
<p>Php zendframework doctrine jQuery and other cool stuff</p>


<a href="https://plus.google.com/118069744464640098068" class="author-social" target="_blank"><i class="icon-google-plus"></i> Google+</a>


<a href="http://github.com/https://github.com/stefanorg" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>


  </div>
  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      <h1 itemprop="name">Redirigere tutte le richieste http su https tramite Virtual Host</h1>
      <h2></h2>
    </div><!--/ .headline-wrap -->
    <div class="article-wrap" itemprop="text">
      <p>Su una applicazione sviluppata con Zend Framework 1, ho avuto la necessità di redirigere tutte le richieste http ad https. 
Nel mio caso, avendo accesso alla configurazione del server, posso modificare il Virtual Host.</p>

<blockquote>
  <p>Per abilitare il protocollo http su apache potete dare un’occhiata a questo mio altro post: <a href="/articles/abilitare-apache-ssl-osx-lion">Abilitare Apache SSL su OSX Lion</a></p>
</blockquote>

<p>L’applicazione sviluppata con ZendFramework 1 è ospitata su un server CentOS 6.3 con webserver apache2.</p>

<p>Modifico il file di configurazione del Virtual Host che si trova in <code>/etc/httpd/conf.d/ilmiosito.conf</code> in questo modo</p>

<div class="highlight"><pre><code class="bash"><span class="c">#configurazione vhost porta 80</span>
&lt;VirtualHost ilmiosito.local:80&gt;
        RewriteEngine on
        ReWriteCond %<span class="o">{</span>SERVER_PORT<span class="o">}</span> !^443<span class="err">$</span>
        <span class="c">#tutte le richieste http le redirigo su https</span>
        RewriteRule ^/<span class="o">(</span>.*<span class="o">)</span> https://%<span class="o">{</span>HTTP_HOST<span class="o">}</span>/<span class="nv">$1</span> <span class="o">[</span>NC,R,L<span class="o">]</span>
&lt;/VirtualHost&gt;

<span class="c">#configurazione vhost porta 443 https</span>
&lt;VirtualHost ilmiosito.local:443&gt;
   DocumentRoot <span class="s2">&quot;/var/www/ilmiosito/public&quot;</span>
   ServerName ilmiosito.local

   RewriteEngine on
   RewriteCond %<span class="o">{</span>HTTP_HOST<span class="o">}</span> ^ilmisito<span class="nv">$ </span><span class="o">[</span>NC<span class="o">]</span>
   RewriteRule ^<span class="o">(</span>.*<span class="o">)</span><span class="nv">$ </span>https://ilmiosito.local<span class="nv">$1</span> <span class="o">[</span><span class="nv">R</span><span class="o">=</span>301,L<span class="o">]</span>

   <span class="c"># This should be omitted in the production environment</span>
   SetEnv APPLICATION_ENV production

   &lt;Directory <span class="s2">&quot;/var/www/ilmiosito/public&quot;</span>&gt;
       Options Indexes MultiViews FollowSymLinks
       AllowOverride All
       Order allow,deny
       Allow from all
   &lt;/Directory&gt;

  ErrorLog logs/ssl/ilmiosito-error.log
  CustomLog logs/ssl/ilmiosito-access.log combined
  SSLEngine on
  SSLCertificateFile /etc/httpd/ssl/crt/ilmiosito.crt
  SSLCertificateKeyFile /etc/httpd/ssl/key/ilmisito.key
&lt;/VirtualHost&gt;
</code></pre></div>


      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          <img src="http://localhost:4000/images/bio-photo.jpg" class="bio-photo" alt="Stefano Corallo bio photo"></a>
<h3>Stefano Corallo</h3>
<p>Php zendframework doctrine jQuery and other cool stuff</p>


<a href="https://plus.google.com/118069744464640098068" class="author-social" target="_blank"><i class="icon-google-plus"></i> Google+</a>


<a href="http://github.com/https://github.com/stefanorg" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>


        </div>
        <p class="byline"><strong>Redirigere tutte le richieste http su https tramite Virtual Host</strong> was published on <time datetime="2013-11-25T10:14:14+01:00" itemprop="datePublished">November 25, 2013</time> by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name"><a href="http://localhost:4000/about" title="About Stefano Corallo" itemprop="url">Stefano Corallo</a></span></span>.</p>
        <section id="disqus_thread"></section>
      </footer>
    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://localhost:4000/articles">View all articles</a>)</small></h4>
    <ul>
    
      
      
        
          
        
      
      
      <li><a href="http://localhost:4000/articles/template" title="TEMPLATE Macports Abilitare Apache SSL su Mac OSX Lion">TEMPLATE Macports Abilitare Apache SSL su Mac OSX Lion</a></li>
      
    
      
      
        
          
        
      
      
      <li><a href="http://localhost:4000/articles/abilitare-apache-ssl-osx-lion" title="Macports Abilitare Apache SSL su Mac OSX Lion">Macports Abilitare Apache SSL su Mac OSX Lion</a></li>
      
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    <span>&copy; 2013 Stefano Corallo. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-747635-7']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'devplayground'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        

</body>
</html>
